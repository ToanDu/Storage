@import helper._
@import vn.m2m.utils.DateUtil
@import vn.m2m.common.models.User
@import vn.m2m.utils.UserHelper
@(currentUser:User, countTotalDevice: Long, countTotalUser: Long)

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("Dashboard")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/iot.png")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    <link href="@routes.Assets.versioned("assets/css/style.css")" rel="stylesheet"/>
    <link href="@routes.Assets.versioned("assets/css/loader-style.css")" rel="stylesheet"/>
    <link href="@routes.Assets.versioned("assets/css/bootstrap.css")" rel="stylesheet"/>
    <link href="@routes.Assets.versioned("assets/js/progress-bar/number-pb.css")" rel="stylesheet"/>
    <link href="@routes.Assets.versioned("stylesheets/views/dashboard/map.css")" rel="stylesheet"/>

    <style type="text/css">
            canvas#canvas4 {
              position: relative;
              top: 20px;
            }
    </style>
    @*<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>*@
    <link rel="shortcut icon" href="@routes.Assets.versioned("assets/ico/minus.png")">

    <script type="text/javascript" src="@UserHelper.linkGoogleMapApi"> </script>
  </head>
  <body>
      <!-- Preloader -->
    <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>

    <nav role="navigation" class="navbar navbar-static-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" class="navbar-toggle" type="button">
            <span class="entypo-menu"></span>
          </button>
          <button class="navbar-toggle toggle-menu-mobile toggle-left" type="button">
            <span class="entypo-list-add"></span>
          </button>

          <div id="logo-mobile" class="visible-xs">
            <h1>IoT Platform
              <span>v1.1</span>
            </h1>
          </div>
        </div>

        @views.html.dashboard.Navbar(currentUser)
      </div>
    </nav>

      @views.html.dashboard.SideMenu(currentUser)

      <!--  PAPER WRAP -->
    <div class="wrap-fluid">
      <div class="container-fluid paper-wrap bevel tlbr">
          <!-- CONTENT -->
        @views.html.dashboard.Title(currentUser, "Dashboard")

        <div id="paper-middle">
          <div id="map-canvas"></div>
        </div>

          <!--  DEVICE MANAGER -->
        <div class="content-wrap">
          <div class="row">

            <div class="col-sm-6">
              <div class="col-sm-6">
                <div class="profit" id="profitClose">
                  <div class="headline ">
                    <h3>
                      <span>
                        <i class="maki-ferry"></i>&#160;&#160;@Messages("Devices")</span>
                    </h3>
                  </div>
                  <div class="value">
                    <span><i class="maki-ferry fa-2x"></i>
                    </span><b style="font-size: 60px">@countTotalDevice</b><b>Device IoT</b>
                  </div>
                  <div class="progress-tinny">
                    <div style="width: 50%" class="bar"></div>
                  </div>
                  <div class="profit-line">
                    <i class="fa fa-caret-up fa-lg"></i>&#160;&#160; 50% &#160;From Last Hour</div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="member" id="memberClose">
                  <div class="headline ">
                    <h3>
                      <span>
                        <i class="fa fa-users"></i>&#160;&#160;@Messages("USERS")</span>
                    </h3>
                  </div>
                  <div class="value">
                    <span><i class="fa fa-user fa-2x"></i>
                    </span><b style="font-size: 60px">@countTotalUser</b><b>User</b>
                  </div>
                  <div class="progress-tinny">
                    <div style="width: 50%" class="bar"></div>
                  </div>
                  <div class="profit-line">
                    <i class="fa fa-caret-up fa-lg"></i>&#160;&#160; 50% &#160;From Last Hour</div>
                </div>
              </div>
              <div class="col-sm-12">
                <div class="order" id="orderClose">
                  <div class="headline ">
                    <h3>
                      <span>
                        <i class="fa fa-rss"></i>&#160;&#160;@Messages("ACCESS")</span>
                    </h3>
                  </div>
                  <div class="value">
                    <span><i class="fa fa-rss fa-2x"></i>
                    </span><b style="font-size: 60px">111</b><b>Access To Day</b>
                  </div>
                  <div class="progress-tinny">
                    <div style="width: 50%" class="bar"></div>
                  </div>
                  <div class="profit-line">
                    <i class="fa fa-caret-up fa-lg"></i>&#160;&#160; 50% &#160;From Last Hour</div>
                </div>
              </div>
            </div>

            <div class="col-sm-6">
              <div class="chart-wrap">
                <div class="chart-dash">
                  <div id="placeholder" style="width:100%;height:200px;"></div>
                </div>

                <div class="row">
                  <div class="col-sm-8">
                    <div class="speed">
                      <h2>Speed </h2>
                      <h1>74
                        <span>Km / hours</span>
                      </h1>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="traffic">
                      <h2> per day</h2>
                      <h1>2.5874</h1>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-4">
                    <div class="traffic-rates">
                      <h4> Rates</h4>
                      <h1>30 %
                        <span>-1,3 %</span>
                      </h1>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="traffic-rates">
                      <h4> Rates</h4>
                      <h1>30 %
                        <span>-1,3 %</span>
                      </h1>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="traffic-rates">
                      <h4>Rates</h4>
                      <h1>30 %
                        <span>-1,3 %</span>
                      </h1>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
          <!--  / DEVICE MANAGER -->

        <div class="content-wrap">
          <div class="row">

          </div>
            <!-- /END OF CONTENT -->

          @views.html.dashboard.Footer()

        </div>

      </div>
    </div>
      <!--  END OF PAPER WRAP -->

    @views.html.dashboard.RightSlide()


    <script type="text/javascript" src="@routes.Assets.versioned("assets/js/chart/realTime.js")"></script>

    <script>
            var initLatLng = new google.maps.LatLng(21.025703, 105.832758);
            var mapOptions = {
              center: initLatLng,
              zoom: 12,
              zoomControl: true,
              zoomControlOptions: {
                position: google.maps.ControlPosition.RIGHT_BOTTOM
              },
              mapTypeControlOptions: {
                position: google.maps.ControlPosition.TOP_RIGHT
              },
              scaleControl: true,
              streetViewControl: false,
              fullscreenControl: true,
              fullscreenControlOptions: {
                position: google.maps.ControlPosition.RIGHT_BOTTOM
              },
              gestureHandling: 'greedy'
            };
            var mapPosition = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

            var device_vtag = "@routes.Assets.versioned("images/vtag/vtag.png")";

            var circleSignal_run = "@routes.Assets.versioned("images/signal/greenCircle.gif")";
            var circleSignal_parking = "@routes.Assets.versioned("images/signal/blueCircle.gif")";
            var circleSignal_lost_Gps = "@routes.Assets.versioned("images/signal/yellowCircle.gif")";
            var circleSignal_lost_connect = "@routes.Assets.versioned("images/signal/grayCircle.gif")";
            var circleSignal_alarm = "@routes.Assets.versioned("images/signal/redCircle.gif")";
    </script>
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/MapPositionMarkerCluster.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/dashboard_mapController.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/dashboard_map_markerSignal.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/dashboard_map_markerCluster.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/dashboard_map_infoWindow.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/dashboard_map_getImgWithRotation.js")" type="text/javascript"></script>

    @*socket*@
    <script src="@routes.Assets.versioned("javascripts/views/dashboard/dashboard_map_socket.js")" type="text/javascript"></script>
    <script type="text/javascript">
            var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket;
            var socket;
            var urlWS;
            if (isSecure()) {
              urlWS = "@controllers.routes.SocketController.wsSocket().webSocketURL(true)";
            }
            else {
              urlWS = "@controllers.routes.SocketController.wsSocket().webSocketURL(false)";
            }
            console.log("urlWS:" +urlWS);
            setTimeout(function() {
              socket = startSocket(urlWS, false);
            }, 1000);
    </script>

  </body>
</html>
