@import vn.m2m.utils.DateUtil
@import vn.m2m.common.models.User
@(currentUser:User, userId:String)
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("history.order.sim.title")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    <link href="@routes.Assets.versioned("stylesheets/views/modal-right.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("assets/plugins/input-tags/css/tagsinput.css")" rel="stylesheet" />
    @*<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" >*@
    <link href='@routes.Assets.versioned("stylesheets/fonts/roboto.css")' type='text/css'>
    <link href="@routes.Assets.versioned("stylesheets/fonts/fonts.googleapis/fontsgoogleapis.css")" rel="stylesheet">
    <link href="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.min.css")" rel="stylesheet" >

    <link href="@routes.Assets.versioned("stylesheets/views/telco/utilites/utilites.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("stylesheets/views/telco/telco.css")" rel="stylesheet" />
  </head>
  <body class="bg-theme">
    @views.html.telco.Menu(currentUser, "", userId)

    @views.html.telco.Header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">
        @views.html.telco.buySim.manageOrder.ManageOrder_formSearch(currentUser)

        <div class="card" style="border-radius: 8px;">
          <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped" id="listOrderTable" style="width: 100%;">
              <thead style="background-color: #FBCCD6;">
                <tr>
                  <th>@Messages("history.table.no")</th>
                  <th>@Messages("history.table.order.code")</th>
                  <th>@Messages("history.table.order.type")</th>
                  <th>@Messages("history.table.company.name")</th>
                  <th>@Messages("history.table.representative")</th>
                  <th>@Messages("history.table.phone.number")</th>
                  <th>@Messages("history.table.status")</th>
                  <th>@Messages("history.table.time")</th>
                  <th>@Messages("history.table.actions")</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
            <h5 id="notiNotData" style="text-align: center;"></h5>
          </div>
          <div class="row">
            <div class="col-md-4 d-flex align-items-center justify-content-center justify-content-md-start mb-3">
              <p class="mb-0">@Messages("history.total") <span id="total_record">0</span> @Messages("history.records")</p>
            </div>
            <div class="col-md-8 d-flex flex-column flex-md-row justify-content-end align-items-center gap-2 gap-md-3 mb-3">
              <div class="dropdown mb-2 mb-md-0">
                <button class="btn btn-sm dropdown-toggle btn-outline-dark" type="button" data-bs-toggle="dropdown"
                  aria-expanded="false" id="countPageSize" style="margin-left: 5px;">
                  10
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="javascript:ApplyFilter(1,10,true)">10</a></li>
                  <li><a class="dropdown-item" href="javascript:ApplyFilter(1,50,true)">50</a></li>
                  <li><a class="dropdown-item" href="javascript:ApplyFilter(1,100,true)">100</a></li>
                  <li><a class="dropdown-item" href="javascript:ApplyFilter(1,200,true)">200</a></li>
                  <li><a class="dropdown-item" href="javascript:ApplyFilter(1,500,true)">500</a></li>
                </ul>
              </div>
              <p class="mb-2 mb-md-0">@Messages("history.records.per.page")</p>
              <div id="pagingTable" class="justify-content-md-end"></div>
            </div>
          
          </div>
          <div>
            <input name="page" id="page" value="1" style="display: none">
            <input name="pageSize" id="pageSize" value="10" style="display: none">
            <input name="isResetPage" id="isResetPage" value="false" style="display: none">
          </div>
          </div>
        </div>

      </div>
    <!-- Modal -->
    <div id="orderDetailModal" class="modal fade" tabindex="-1">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header"><h5 class="modal-title">@Messages("history.modal.order.details")</h5></div>
          <div class="modal-body">
            <div class="row g-4">
              <!-- Cột 1 -->
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="orderCode" class="form-label">@Messages("history.modal.order.code")</label>
                  <input type="text" class="form-control" id="orderCodeReadonly" readonly>
                </div>
                <div class="mb-3">
                  <label for="orderTime" class="form-label">@Messages("history.modal.order.time")</label>
                  <input type="text" class="form-control" id="orderTimeReadonly" readonly>
                </div>
                <div class="mb-3">
                  <label for="recipientName" class="form-label">@Messages("history.modal.representative")</label>
                  <input type="text" class="form-control" id="recipientNameReadonly" readonly>
                </div>
              </div>
    
              <!-- Cột 2 -->
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="orderType" class="form-label">@Messages("history.modal.order.type")</label>
                  <input type="text" class="form-control" id="orderTypeReadonly" readonly>
                </div>
                <div class="mb-3">
                  <label for="orderMethod" class="form-label">@Messages("history.modal.receive.method")</label>
                  <input type="text" class="form-control" id="orderMethodReadonly" readonly>
                </div>
                <div class="mb-3">
                  <label for="recipientPhone" class="form-label">@Messages("history.modal.phone.number")</label>
                  <input type="text" class="form-control" id="recipientPhoneReadonly" readonly>
                </div>
              </div>
    
              <!-- Cột 3 -->
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="orderStatus" class="form-label">@Messages("history.modal.status")</label>
                  <input type="text" class="form-control" id="orderStatusReadonly" readonly>
                </div>
                <div class="mb-3">
                  <label for="bussinessName" class="form-label">@Messages("history.modal.company")</label>
                  <input type="text" class="form-control" id="bussinessNameReadonly" readonly>
                </div>
                <div class="mb-3">
                  <label for="recipientAddress" class="form-label">@Messages("history.modal.delivery.address")</label>
                  <input type="text" class="form-control" id="recipientAddressReadonly" readonly>
                </div>
              </div>
            </div>
    
            <!-- Bảng sản phẩm -->
            <div class="table-responsive mt-4">
              <h6 class="fw-bold mb-2">@Messages("history.modal.product.list")</h6>
              <table id="orderProductTable" class="table table-bordered table-striped">
                <thead style="background-color: #FBCCD6;">
                </thead>
                <tbody>
                  <!-- Nội dung sẽ được đổ từ JavaScript -->
                </tbody>
              </table>
            </div>
            <div class="row pagination-section px-2">
            <div class="col-md-4 d-flex align-items-center justify-content-center justify-content-md-start mb-3">
              <p class="mb-0">@Messages("history.total") <span id="total_record">0</span> @Messages("history.records")</p>
            </div>
            <div class="col-md-8 d-flex flex-column flex-md-row justify-content-end align-items-center gap-2 gap-md-3 mb-3">
              <div class="dropdown mb-2 mb-md-0">
                <button class="btn btn-sm dropdown-toggle btn-outline-dark" type="button" data-bs-toggle="dropdown"
                  aria-expanded="false" id="countPageSize" style="margin-left: 5px;">
                  10
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="javascript:applySearchModalDetail(1,10,true)">10</a></li>
                  <li><a class="dropdown-item" href="javascript:applySearchModalDetail(1,50,true)">50</a></li>
                  <li><a class="dropdown-item" href="javascript:applySearchModalDetail(1,100,true)">100</a></li>
                  <li><a class="dropdown-item" href="javascript:applySearchModalDetail(1,200,true)">200</a></li>
                  <li><a class="dropdown-item" href="javascript:applySearchModalDetail(1,500,true)">500</a></li>
                </ul>
              </div>
              <p class="mb-2 mb-md-0">@Messages("history.records.per.page")</p>
              <div id="pagingTable" class="justify-content-md-end"></div>
            </div>
            <div>
              <input type="hidden" name="page" id="page" value="1" />
              <input type="hidden" name="pageSize" id="pageSize" value="10" />
              <input type="hidden" name="isResetPage" id="isResetPage" value="false" />
            </div>
          </div>
          </div>
          <div class="modal-footer">
            <button class="btn mt-3 btn-telco" style="background: #FFFFFF; color: #EA0033;" data-bs-dismiss="modal">@Messages("btnClose")</button>
          </div>
        </div>
      </div>
    </div>
      @views.html.telco.Loading()

    </div>
      <!--  END OF PAPER WRAP -->

    @views.html.telco.mainJs()

    <script>
      var userId = '@userId';
      var orderType = "";
      var ordersTemp = [];
 
            var imgDefault = '@routes.Assets.versioned("images/market/default.png")';
            $(document).ready(function () {
              $("#menu-orderManage").addClass("mm-active");
              $("#menu").metisMenu();
            })
            $('#orderDetailModal').on('hidden.bs.modal', function () {
            orderType = "";
            ordersTemp=[];
            $("#orderDetailModal #pagingTable").empty();
            $("#orderDetailModal #total_record").text('0');
            $('#orderDetailModal [name=page]').val(1);
            $('#orderDetailModal [name=pageSize]').val(10);
            });
    </script>
    <script src="@routes.Assets.versioned("javascripts/exportfile/table3export.js")" type="text/javascript"></script>

    <script src="@routes.Assets.versioned("javascripts/views/telco/buySim/manageOrder/ManageOrder.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/telco/buySim/manageOrder/ManageOrder_export.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/js/moment.min.js")"></script>
    <script src="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.min.js")"></script>
    <script>
      $('.datetimepicker').bootstrapMaterialDatePicker({
        format: 'DD/MM/YYYY',
        time: false,
        maxDate: moment()
      });
    </script>
  </body>
</html>
