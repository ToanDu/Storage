@import vn.m2m.common.models.User
@import vn.m2m.utils.UserHelper
@(currentUser:User, contract:String, userId:String)
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("invoice.contract.title")@contract</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    <link href="@routes.Assets.versioned("stylesheets/views/modal-right.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("assets/plugins/input-tags/css/tagsinput.css")" rel="stylesheet" />
    <link href='@routes.Assets.versioned("stylesheets/fonts/roboto.css")' type='text/css'>
    <link href="@routes.Assets.versioned("stylesheets/fonts/fonts.googleapis/fontsgoogleapis.css")" rel="stylesheet">
    @*<link href="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.min.css")" rel="stylesheet" >*@
    <link href="@routes.Assets.versioned("stylesheets/bootstrap/datepicker.min.css")" rel="stylesheet" />

    <link href="@routes.Assets.versioned("stylesheets/views/telco/telco.css")" rel="stylesheet" />

  </head>
  <body class="bg-theme">
    @views.html.telco.Menu(currentUser, "", userId)

    @views.html.telco.Header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">
        <div class="card">
          <div class="card-body">
            <span class="text-search">@Messages("invoice.contract.listTitle")</span>
            <div class="row mt-3">
              <div class="col-md-6 m-t-3">
                <div class="row m-b-4">
                  <div class="col-sm-1"></div>
                  <label class="col-sm-3 col-form-label title-section-2">@Messages("invoice.contract.contractNumber")</label>
                  <div class="col-sm-8">
                    <input id="contractId" type="text" class="form-control input-form" value="@contract" readonly>
                  </div>
                </div>
              </div>
              <div class="col-md-6 m-t-3">
                <div class="row m-b-4">
                  <div class="col-sm-1"></div>
                  <label class="col-sm-3 col-form-label title-section-2">@Messages("invoice.contract.selectMonth")</label>
                  <div class="col-sm-8">
                    @fromTime = @{
                      import java.util.Calendar
                      import java.text.SimpleDateFormat

                      val today = Calendar.getInstance
                      today.add(Calendar.MINUTE, +0);
                      val curTimeFormat = new SimpleDateFormat("MM/yyyy")
                      curTimeFormat.format(today.getTime)
                    }
                    <input class="form-control datetimepicker" type="text" id="monthInvoice" value="@fromTime" placeholder="@Messages("invoice.contract.monthPlaceholder")">
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex flex-column align-items-center text-center">
              <div class="">
                <button type="button" class="btn mt-3 btn-telco" style="background: #FFFFFF; color: #EA0033;" onclick="exportInvoiceCSV()">@Messages("invoice.contract.exportCSV")</button>
                <button type="button" class="btn mt-3 btn-telco" style="background: #EA0033; color: #FFFFFF;" onclick="getListInvoiceOfContract()">@Messages("invoice.contract.lookup")</button>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-body" style="border-radius: 8px;" id="divTableInvoice">
            <table class="table" id="tableListInvoice" style="width: 100%;">
              <thead style="background-color: #ff000054;">
                <tr>
                  <th>@Messages("invoice.contract.table.stt")</th>
                  <th>@Messages("invoice.contract.table.invoiceNumber")</th>
                  <th>@Messages("invoice.contract.table.type")</th>
                  <th>@Messages("invoice.contract.table.beforeTax")</th>
                  <th>@Messages("invoice.contract.table.afterTax")</th>
                  <th>@Messages("invoice.contract.table.assignDate")</th>
                  @if(UserHelper.isFeatureRole(currentUser, "download_invoice")){
                    <th>@Messages("invoice.contract.table.actions")</th>
                  }
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <h5 id="notiNotDatatable" style="text-align: center;"></h5>
        </div>

      </div>

      @views.html.telco.Loading()

    </div>
      <!--  END OF PAPER WRAP -->

    @views.html.telco.mainJs()
    <script src="@routes.Assets.versioned("javascripts/bootstrap/bootstrap-datepicker.min.js")" type="text/javascript"></script>

    <script>
            var contractId = '@contract';
            var imgDefault = '@routes.Assets.versioned("images/market/default.png")';
            var isDownloadInvoice = '@UserHelper.isFeatureRole(currentUser, "download_invoice")';
            console.log(isDownloadInvoice + " isDownloadInvoice");
            $(document).ready(function () {
              $("#menu-contractManage").addClass("mm-active");
              $("#menu").metisMenu();

              $('.datetimepicker').datepicker({
                format: 'mm/yyyy',
                startView: "months",
                minViewMode: "months"
              });
            })
    </script>

    <script src="@routes.Assets.versioned("javascripts/views/telco/contract/invoice/invoice.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/telco/contract/invoice/invoice_export.js")" type="text/javascript"></script>

  </body>
</html>
