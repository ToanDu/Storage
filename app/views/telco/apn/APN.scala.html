@import vn.m2m.utils.DateUtil
@import vn.m2m.common.models.User
@import vn.m2m.utils.UserHelper
@(currentUser:User, userId:String)
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("apn.title")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    <link href="@routes.Assets.versioned("stylesheets/views/modal-right.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("assets/plugins/input-tags/css/tagsinput.css")" rel="stylesheet" />
    <link href='@routes.Assets.versioned("stylesheets/fonts/roboto.css")' type='text/css'>
    <link href="@routes.Assets.versioned("stylesheets/fonts/fonts.googleapis/fontsgoogleapis.css")" rel="stylesheet">
    <link href="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.min.css")" rel="stylesheet" >
    <link href="@routes.Assets.versioned("stylesheets/views/telco/apn/index.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("stylesheets/component/DatetimePicker.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("stylesheets/main.css")" rel="stylesheet" />
  </head>
  <body class="bg-theme">
    @views.html.telco.Menu(currentUser, "", userId)

    @views.html.telco.Header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">
        @views.html.telco.apn.APN_searchForm()

      <div class="card" id="apnSubscriptionCard">
          <div class="card-body" style="min-height: 10rem;">
            <div class="row" id="noDataFound">
              <div class="col-md-12">
                @Messages("apn.noData")
              </div>
            </div>
            <div class="row d-none" id="apnSubscriptionInfo">
              @views.html.telco.apn.APN_subscription()
            </div>
          </div>
      </div>
      @views.html.telco.apn.APN_addModal()
      @views.html.telco.apn.APN_exportModal()
      @views.html.telco.apn.APN_cancelModal()
      @views.html.telco.Loading()
       
    </div>

    @views.html.telco.mainJs()

    <script src="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/js/moment.min.js")"></script>

    <script type="text/javascript">
      var userId = '@userId';

      $(document).ready(function () {
        $('#apn-fromDate').bootstrapMaterialDatePicker({
          format: 'DD/MM/YYYY',
          minDate: new Date(),
          time: false
        });
        $('#apn-fromDate').bootstrapMaterialDatePicker('setDate', moment());
        $('#apn-toDate').bootstrapMaterialDatePicker({
          format: 'DD/MM/YYYY',
          minDate: new Date(),
          time: false
        });
      })
      var dateNow = new Date().setHours(0, 0, 0, 0);
      var iconAction = "@routes.Assets.versioned("images/telco/apn/disconnect.svg")";

        $(document).ready(function () {
          $('#exportAPNModal').on('hidden.bs.modal', function () {
            $('#apn-page-size').val('1000');
            $('#apn-export-table-container #file_export tbody').html('<tr><td colspan="3" class="text-center">@Messages("apn.noDataAvailable")</td></tr>');
            $("#addBtnDownloadAll #btnDownloadAll").removeClass("text-danger");
            $("#addBtnDownloadAll #btnDownloadAll").addClass("text-darker");
            $("#addBtnDownloadAll #btnDownloadAll").off("click");
          });

          $('#cancelPrivateAPN').on('show.bs.modal', function () {
          });
          $('#cancelPrivateAPN').on('hidden.bs.modal', function () {
            $('#cancelPrivateAPN #apn-name').val('');
            $('#cancelPrivateAPN #apn-ip').val('');
            $('#cancelPrivateAPN #apn-reason').val('299799');
          });     
          $('#addPrivateAPN').on('show.bs.modal', function () {
            const apnName = $("#addPrivateAPN #apn-name");
            apnName.empty();
            apnName.append(`<option value="" disabled selected hidden>${Messages("apn.chooseAPN")}</option>`);

            privateAPN.forEach(function (apn) {
              apnName.append(
                $("<option>", {
                  value: apn.apn_code,
                  text: apn.apn_code,
                })
              );
            });
          });
          $('#addPrivateAPN').on('hidden.bs.modal', function () {
            resetForm()
          });
        });

        $(document).on('keypress', '#apn-phoneNumber-field input', function (e) {
          if (e.which === 13) {
            e.preventDefault();
            handleSearchAPN();
          }
        });
    </script>


    <script src="@routes.Assets.versioned("javascripts/views/telco/apn/validate.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/telco/apn/export.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("assets/plugins/input-tags/js/tagsinput.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/exportfile/table3export.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/telco/apn/index.js")" type="text/javascript"></script>
  </body>
</html>
