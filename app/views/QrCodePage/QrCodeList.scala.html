@import helper._
@import vn.m2m.utils.DateUtil
@import vn.m2m.common.models.User
@import vn.m2m.iot.models.QrCode
@(currentUser:User, qrCodeList: List[QrCode])
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("Manage QR Code")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    <link href="@routes.Assets.versioned("stylesheets/views/group/style.min.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("stylesheets/views/modal-right.css")" rel="stylesheet" />

  </head>
  <body class="bg-theme">
    @views.html.iot.tags.Menu(currentUser, "")

    @views.html.iot.tags.Header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">

          <!--breadcrumb-->
        <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3 ">
          <div class="breadcrumb-title pe-3">@Messages("QR CODE")</div>
          <div class="ps-3">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb mb-0 p-0">
                <li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt "></i></a>
                </li>
                <li class="breadcrumb-item active " aria-current="page">@Messages("manage.qrCodeList")</li>
              </ol>
            </nav>
          </div>
          <div class="ms-auto">

          </div>
        </div>
          <!--end breadcrumb-->

        <div class="card ">
          <div class="card-header card-header-primary card-header-icon">
            <div class="toolbar" style="float: left">
              <div class="toolbar" style="float: left;
                margin-top: 15px; ">
                <input type="file" id="files" name="files" style="display: none;background-color: #f4f4f4"/>
              </div>
            </div>
            <div class="toolbar" style="float: right">

              <button class="btn btn-danger px-5 radius-30" onclick="importFileCSV()">
                <i class="bx bxs-file-import" aria-hidden="true"></i> @Messages("Import")
              </button>
              <button class="btn btn-danger px-5 radius-30" id="buttonSubmitImportCSV" data-bs-toggle="modal" data-bs-target="#addConfirmModal" hidden>
                <i class="bx bxs-file-import" aria-hidden="true"></i> @Messages("Submit")
              </button>
              <button class="btn btn-danger px-5 radius-30" onclick="downloadCSVTemplate()">
                <i class="bx bx-download" aria-hidden="true"></i> @Messages("Download Template")
              </button>
              <button class="btn btn-success px-5 radius-30" onclick="exportQrCodeList()">
                <i class="bx bxs-file-export" aria-hidden="true"></i> @Messages("Export")
              </button>
            </div>
          </div>

          <div class="card-body">
            <div class="table-responsive">

              <table id="dataTables" class="table table-bordered">
                <thead class="cf">
                  <th>@Messages("qr.id")</th>
                  <th>@Messages("qr.Name")</th>
                  <th>@Messages("qr.Link")</th>
                  <th>@Messages("qr.QRCode")</th>
                  <th>@Messages("btnDate")</th>
                  <th>@Messages("btnAction")</th>
                </thead>
                <tbody align="left">
                @for((qr: QrCode)<- qrCodeList) {
                  <tr>
                    <td>@qr.getId</td>
                    <td>@qr.getName</td>
                    <td>@qr.getLinkAndroid<br>@qr.getLinkIos</td>
                    <td>
                      <img src="@qr.getSrc" height="50">
                    </td>
                    <td>@DateUtil.getDateByFormat(qr.getLogDate, DateUtil.FORMAT_DATE_YYYY_MM_DD_HH_mm_ss)</td>
                    <td class="dt-buttons btn-group" style="width: 90%">
                      <a rel="tooltip" title="@Messages("btnView")" class="btn btn-light" href="@routes.QrCodeController.qrCodeImg(qr.getId)" target="_blank">
                        <i class="bx bx-link me-0"></i>
                      </a>
                      <a rel="tooltip" title="@Messages("btnEdit")" class="btn btn-light" onclick="setEditQr('@qr.getId', '@qr.getName', '@qr.getLinkAndroid', '@qr.getLinkIos')" data-bs-toggle="modal" data-bs-target="#editQrConfirm">
                        <i class="bx bx-edit me-0"></i>
                      </a>
                      <a rel="tooltip" title="@Messages("btnDelete")" class="btn btn-light" onclick="setDeleteQr('@qr.getId')" data-bs-toggle="modal" data-bs-target="#deleteQrConfirm">
                        <i class="bx bx-x me-0"></i>
                      </a>
                    </td>
                  </tr>
                }
                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>

      @views.html.QrCodePage.QrCodeList_create()
      @views.html.QrCodePage.QrCodeList_delete()
      @views.html.QrCodePage.QrCodeList_edit()

    </div>
      <!--  END OF PAPER WRAP -->
    @views.html.Loading()

  </body>

  @views.html.iot.tags.Main_js()

  <script src="@routes.Assets.versioned("assets/js/bootstrap.bundle.min.js")"></script>
    <!--plugins-->
  <script src="@routes.Assets.versioned("assets/plugins/simplebar/js/simplebar.min.js")"></script>
  <script src="@routes.Assets.versioned("assets/plugins/metismenu/js/metisMenu.min.js")"></script>
  <script src="@routes.Assets.versioned("assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js")"></script>
  <script>
          $(document).ready(function () {
            $("#menu-qrCode").addClass("mm-active");
            $("#menu").metisMenu();
          })
  </script>

  <script src="@routes.Assets.versioned("javascripts/SearchJs.js")" type="text/javascript"></script>

  <script>
          $(document).ready(function() {
            var table = $('#dataTables').DataTable( {
              lengthChange: false,
              buttons: [ 'excel', 'pdf', 'print'],
              "order": []
            } );

//            table.buttons().container()
//                    .appendTo( '#dataTables_wrapper .col-md-6:eq(0)' );
          } );
  </script>

  <script src="@routes.Assets.versioned("javascripts/jquery/jquery-csv.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/qrCode/downloadTemplate.js")" type="text/javascript"></script>

  <script type="text/javascript">
          $(document).ready(function(){
            document.getElementById('files').addEventListener('change', upload, false);
          });
  </script>
  <script src="@routes.Assets.versioned("javascripts/qrCode/qrcode.min.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/qrCode/QrCode.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/qrCode/importFileIdQrCode.js")" type="text/javascript"></script>

  <script src="@routes.Assets.versioned("javascripts/exportfile/table3export.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/qrCode/exportQrCode.js")" type="text/javascript"></script>

  <script type="text/javascript" src="@routes.Assets.versioned("javascripts/exportZip/jszip.js")"></script>
  <script type="text/javascript" src="@routes.Assets.versioned("javascripts/exportZip/jszip-utils.js")"></script>
  <script type="text/javascript" src="@routes.Assets.versioned("javascripts/exportZip/FileSaver.js")"></script>
</html>
