@import helper._
@import vn.m2m.utils.DateUtil
@import vn.m2m.common.models.User
@import vn.m2m.iot.models.DeviceVariable
@import vn.m2m.utils.UserHelper
@(currentUser:User, projectId:String, deviceVariableList: List[DeviceVariable], deviceId: String, lat: Double, long: Double, battery: Double)
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("Variables Of Device")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    <link href="@routes.Assets.versioned("stylesheets/views/scrollListItem.css")" rel="stylesheet"/>
    <link href="@routes.Assets.versioned("stylesheets/views/modal-right.css")" rel="stylesheet" />
      <script type="text/javascript" src="@UserHelper.linkGoogleMapApi"> </script>
      <style>
              html, body, #map-canvas {
                  height : 350px ;
                  width: 100%;
                  padding : 0 ;
              }

              #paper-middle{
                  padding :0px;
                  height: 50%;
              }
      </style>
      <link href="@routes.Assets.versioned("stylesheets/views/variable/variable.css")" rel="stylesheet" />

  </head>
  <body class="bg-theme">
    @views.html.iot.tags.Menu(currentUser, projectId)

    @views.html.iot.tags.Header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">

          <!--breadcrumb-->
        <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3 ">
          <div class="breadcrumb-title pe-3">@Messages("manage.group.device")</div>
          <div class="ps-3">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb mb-0 p-0">
                <li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt "></i></a>
                </li>
                <li class="breadcrumb-item active " aria-current="page">@Messages("device.variable.title")</li>
              </ol>
            </nav>
          </div>
          <div class="ms-auto">

          </div>
        </div>
          <!--end breadcrumb-->

        <div class="card" style="height: 80vh;">
          <div class="card-header card-header-primary card-header-icon">
            <div class="toolbar" style="float: right">
                <button class="btn btn-success" onclick="getConfigOfDeviceIot()" data-bs-toggle="modal" data-bs-target="#configConfirmModal">
                    <i class="bx bx-world" aria-hidden="true"></i> @Messages("device.variable.configGps")
                </button>
                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addConfirmModal">
                    <i class="bx bx-plus" aria-hidden="true"></i> @Messages("device.variable.addNew")
                </button>
            </div>
          </div>

          <div class="card-body" style="overflow-x: auto; background-color: #ff00009c;">
              <div class="col-md-12">
                  <div class="row">

                      <div class="col-md-4">
                          <div class="row row-cols-1" style="height: 100%">
                              @views.html.iot.DeviceIot.variable.DeviceIotVariable_infoDevice(deviceId)
                          </div>
                      </div>

                      <div class="col-md-8" id="listItem">
                          <div class="product-list p-3 mb-3" style="height: 69vh;">
                              @for((variable: DeviceVariable)<- deviceVariableList) {
                                  <div class="row border mx-0 mb-3 py-2 radius-10 cursor-pointer">
                                      <div class="col-sm-6"
                                      onclick="setEditVariable('@variable.getId','@variable.getName','@variable.getType','@variable.getValue')" data-bs-toggle="modal" data-bs-target="#editConfirmModal">
                                          <div class="d-flex align-items-center">
                                              <div class="ms-2">
                                                  <h6 class="mb-1 text-white">@variable.getName</h6>
                                                  <p class="mb-0 text-white">@variable.getId</p>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="col-sm"
                                      onclick="setEditVariable('@variable.getId','@variable.getName','@variable.getType','@variable.getValue')" data-bs-toggle="modal" data-bs-target="#editConfirmModal">
                                          <h6 class="mb-1 text-white">@variable.getValue</h6>
                                          <p class="mb-0 text-white">@variable.getType</p>
                                      </div>
                                      <div class="col-sm" onclick="showChartOfVariable('@variable.getId','@variable.getName')">
                                          <div id="chart@variable.getStt"></div>
                                      </div>
                                  </div>
                              }
                          </div>
                      </div>

                  </div>
              </div>
          </div>

            @views.html.iot.DeviceIot.variable.DeviceIotVariable_add()
            @views.html.iot.DeviceIot.variable.DeviceIotVariable_editDel()
            @views.html.iot.DeviceIot.variable.DeviceIotVariable_configMap(deviceId, deviceVariableList)
            @views.html.iot.DeviceIot.variable.DeviceIotVariable_chart()

        </div>
      </div>

      @views.html.Loading()

    </div>
      <!--  END OF PAPER WRAP -->

  </body>

    @views.html.iot.tags.Main_js()

    <script src="@routes.Assets.versioned("assets/js/bootstrap.bundle.min.js")"></script>
        <!--plugins-->
    <script src="@routes.Assets.versioned("assets/plugins/simplebar/js/simplebar.min.js")"></script>
    <script src="@routes.Assets.versioned("assets/plugins/metismenu/js/metisMenu.min.js")"></script>
    <script src="@routes.Assets.versioned("assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js")"></script>
    <script>
        var lenghtListVar = @deviceVariableList.size();
        console.log(lenghtListVar);

        var deviceId = '@deviceId';

            $(document).ready(function () {
                $("#menu-device").addClass("mm-active");
                $("#menu").metisMenu();
            })
    </script>

    <script src="@routes.Assets.versioned("javascripts/SearchJs.js")" type="text/javascript"></script>

    <script src="@routes.Assets.versioned("assets/plugins/apexcharts-bundle/js/apexcharts.min.js")" type="text/javascript"></script>

    <script src="@routes.Assets.versioned("javascripts/views/device/variable/Variable.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/device/variable/Variable_add.js")" type="text/javascript"></script>
    <script src="@routes.Assets.versioned("javascripts/views/device/variable/Variable_editDel.js")" type="text/javascript"></script>

    <script src="@routes.Assets.versioned("javascripts/views/device/variable/Variable_map.js")" type="text/javascript"></script>
    <script>
            var initLatLng = new google.maps.LatLng(21.025703, 105.832758);
            var mapOptions = {
                center: initLatLng,
                zoom: 12,
                zoomControl: true,
                zoomControlOptions: {
                    position: google.maps.ControlPosition.RIGHT_BOTTOM
                },
                mapTypeControlOptions: {
                    position: google.maps.ControlPosition.TOP_RIGHT
                },
                scaleControl: true,
                streetViewControl: false,
                fullscreenControl: true,
                fullscreenControlOptions: {
                    position: google.maps.ControlPosition.RIGHT_BOTTOM
                },
                gestureHandling: 'greedy'
            };
            var mapPosition = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

            console.log('@lat', '@long');
            if('@lat' > 0 && '@long' > 0){
                addMarkerMap('@lat', '@long', '@battery', '@deviceId');
            }

            var device_vtag = "@routes.Assets.versioned("images/dashboard/marker.png")";

            var circleSignal_run = "@routes.Assets.versioned("images/signal/greenCircle.gif")";
            var circleSignal_parking = "@routes.Assets.versioned("images/signal/blueCircle.gif")";
            var circleSignal_lost_Gps = "@routes.Assets.versioned("images/signal/yellowCircle.gif")";
            var circleSignal_lost_connect = "@routes.Assets.versioned("images/signal/grayCircle.gif")";
            var circleSignal_alarm = "@routes.Assets.versioned("images/signal/redCircle.gif")";
    </script>

    <script src="@routes.Assets.versioned("assets/plugins/apexcharts-bundle/js/apexcharts.min.js")"></script>
    <script src="@routes.Assets.versioned("assets/plugins/chartjs/js/Chart.min.js")"></script>

    <script src="@routes.Assets.versioned("javascripts/views/device/variable/Variable_chart.js")" type="text/javascript"></script>

</html>
