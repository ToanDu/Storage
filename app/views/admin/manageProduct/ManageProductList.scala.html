@import helper._
@import vn.m2m.utils.DateUtil
@import vn.m2m.common.models.User
@import vn.m2m.iot.models.Product
@import vn.m2m.common.models.forms.SearchObjectData
@(currentUser:User, searchResultData: SearchObjectData, searchField: List[String])
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("Manage Product List")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    @*<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" >*@
    <link href='@routes.Assets.versioned("stylesheets/fonts/roboto.css")' type='text/css'>
    <link href="@routes.Assets.versioned("stylesheets/fonts/fonts.googleapis/fontsgoogleapis.css")" rel="stylesheet">
    <link href="@routes.Assets.versioned("assets/plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.min.css")" rel="stylesheet" >

    <style>
            .btn-flat {
              color: white;
            }
      .fw-bold {
        margin-bottom: 0.5rem;
      }
    </style>
  </head>
  <body class="bg-theme">
    @views.html.admin.navbar()

    @views.html.admin.header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">

        @views.html.filter.FilterHeaderTag(currentUser,searchResultData.getSearchFilterForm,searchField,"/manageProductList")

        <div class="card" style="box-shadow: 0 0.3rem 1.8rem rgb(0 0 0 / 12%);">
          <div class="card-header card-header-primary card-header-icon">
            <div class="toolbar" style="float: right">
              <button class="btn btn-success px-5 radius-30" onclick="">
                <i class="bx bx-download" aria-hidden="true"></i> @Messages("Export")
              </button>
            </div>
          </div>

          <div class="card-body">
            <div class="table-responsive">

              <table id="dataTables" class="table align-middle mb-0 table-responsive table-striped" style='width: 100%;'>
                <thead>
                  <th>@Messages("STT")</th>
                  <th>@Messages("filter.code")</th>
                  <th>@Messages("filter.name")</th>
                  <th>@Messages("filter.username")</th>
                  <th>@Messages("filter.groupName")</th>
                  <th>@Messages("filter.statusApprove")</th>
                  <th>@Messages("filter.createDate")</th>
                  <th>@Messages("filter.action")</th>
                </thead>
                <tbody>
                @for((product: Product, index)<- searchResultData.getObjectList.zipWithIndex) {
                  <tr>
                    <td>@(index+1+(searchResultData.getSearchFilterForm.getPage -1)*searchResultData.getSearchFilterForm.getPageSize)</td>
                    <td>@product.getCode</td>
                    <td>@product.getName</td>
                    <td>@product.getUserName</td>
                    <td>@product.getGroupName</td>
                    @if(product.getStatusApprove == 1){
                      <td style="color: green">@Messages("Đã duyệt")</td>
                    } else if(product.getStatusApprove == 2){
                      <td style="color: red">@Messages("Từ chối")</td>
                    } else if(product.getStatusApprove == 3){
                      <td style="color: #ffc107">@Messages("Chờ duyệt")</td>
                    } else {
                      <td>@Messages("Mới khởi tạo")</td>
                    }
                    <td>@DateUtil.getDateByFormat(product.getCreateDate, DateUtil.DATE_TIME_CONVERT)</td>
                    <td>
                      <button class="btn btn-info" onclick="showDetailProduct('@product.getId')" data-bs-toggle="modal" data-bs-target="#detailConfirmModal">
                        <i class="bx bx-info-circle"></i>
                      </button>
                    </td>
                  </tr>
                }
                </tbody>
              </table>

              @views.html.filter.FilterFooterTag(searchResultData.getSearchFilterForm)

            </div>
          </div>
        </div>

      </div>
    </div>

    @views.html.admin.manageProduct.ManageProductList_detail()

    @views.html.Loading()

  </body>

  @views.html.admin.mainJs()

  <script>
          $(document).ready(function () {
            $("#menu-manageProduct").addClass("mm-active");
            $("#menu").metisMenu();

            var table = $("#dataTables").DataTable({
              responsive: true,
              lengthChange: false,
              "info": false,
              bSort: false,
              "order": false,
              "paging" : false,
              searching: false
            });

            $('#dateFromcreateDate').bootstrapMaterialDatePicker({
              format: 'DD/MM/YYYY HH:mm',
              time: true
            });
            $('#dateTocreateDate').bootstrapMaterialDatePicker({
              format: 'DD/MM/YYYY HH:mm',
              time: true
            });
          })

  </script>

  <script src="@routes.Assets.versioned("javascripts/SearchJs.js")" type="text/javascript"></script>
  @views.html.filter.FilterScriptTag(searchResultData.getSearchFilterForm, searchField)

  <script src="@routes.Assets.versioned("javascripts/views/admin/manageProduct/ManageProduct.js")" type="text/javascript"></script>

</html>
