@import helper._
@import vn.m2m.common.models.User
@import vn.m2m.models.Group
@import vn.m2m.utils.UserHelper
@(currentUser:User, projectId: String)
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>@Messages("Manage Organizations")</title>
    <link rel="icon" type="image/png" href="@routes.Assets.versioned("images/logo.jpg")">

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

    @views.html.iot.tags.Main_css()

    <link href="@routes.Assets.versioned("stylesheets/views/group/style.min.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("stylesheets/views/modal-right.css")" rel="stylesheet" />
    <link href="@routes.Assets.versioned("stylesheets/views/group/group.css")" rel="stylesheet" />
    <style>

    </style>
  </head>
  <body class="bg-theme">
    @views.html.iot.tags.Menu(currentUser, projectId)

    @views.html.iot.tags.Header(currentUser)

    <div class="page-wrapper">
      <div class="page-content">

        <div class="row">
          <div class="col-md-4">
            <div class="card">

              <div class="panel" style="height: 85vh;">
                <div class="panel-heading" >
                  <h4 class="panel-title">
                    <div class="row" style="padding: 10px;">
                      <div class="col-md-6" style="border-bottom: 1px solid #ccc!important;">
                        <h6 style="padding: 12px; font-weight: normal"><img src="@routes.Assets.versioned("images/org/list.png")" > @Messages("manage.group.list")</h6>
                      </div>
                      <div class="col-md-6" style="border-bottom: 1px solid #ccc!important;">
                        <div class="input-group">
                          <span class="input-group-text" style="margin-left: -5px; cursor: pointer" onclick="showPopupAddOrg()" data-bs-toggle="modal" data-bs-target="#addGroupRootModal" title="@Messages("iot.manage.groupAis.addGroupRoot")"><i class='bx bx-plus'></i></span>
                          <span class="input-group-text" onclick="focusSearchTree()"><i class='bx bx-search-alt'></i></span>
                          <input id="search-selectOrg" class="search-input form-control border-start-0" placeholder="" maxlength="30">
                        </div>
                      </div>
                    </div>
                  </h4>
                </div>


                <div class="panel-body" style="padding: 5px 2px 2px 2px; overflow-y: auto;  background-color: #EAEBEB; height: 77vh;" >
                  <div style="width: 100%; overflow: auto; height: 100%" id="tabListOrg">
                    <div id="jstree">
                      @*sideBar jstree in here...*@
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>

          <div class="col-md-8">
            <div class="card " style="height: 85vh; overflow-x: auto">
              <div class="card-body">
                <ul class="nav nav-tabs" role="tablist">

                  <li class="nav-item" role="presentation" onclick="changeTabInfoOrg()">
                    <a class="nav-link active" data-bs-toggle="tab" href="#infoOrg" role="tab" aria-selected="false">
                      <div class="d-flex align-items-center">
                        <img src="@routes.Assets.versioned("images/org/org.png")">&nbsp
                        <span style="margin-left: 5px">@Messages("manage.group.infoOrg")</span>
                      </div>
                    </a>
                  </li>
                  <li class="nav-item" role="presentation" onclick="changeTabGroup()">
                    <a class="nav-link" data-bs-toggle="tab" href="#addDelGroup" role="tab" aria-selected="false">
                      <div class="d-flex align-items-center">
                        <img src="@routes.Assets.versioned("images/org/group.png")">&nbsp
                        <span style="margin-left: 5px">@Messages("manage.group.group")</span>
                      </div>
                    </a>
                  </li>
                  <li class="nav-item" role="presentation" onclick="changeTabUser()">
                    <a class="nav-link" data-bs-toggle="tab" href="#addDelUser" role="tab" aria-selected="false">
                      <div class="d-flex align-items-center">
                        <img src="@routes.Assets.versioned("images/org/user.png")">&nbsp
                        <span style="margin-left: 5px">@Messages("manage.group.user")</span>
                      </div>
                    </a>
                  </li>
                  <li class="nav-item" role="presentation" onclick="changeTabDevice()">
                    <a class="nav-link" data-bs-toggle="tab" href="#addDelDevice" role="tab" aria-selected="true">
                      <div class="d-flex align-items-center">
                        <img src="@routes.Assets.versioned("images/org/device.png")">&nbsp
                        <span style="margin-left: 5px">@Messages("manage.group.device")</span>
                      </div>
                    </a>
                  </li>
                  <li class="nav-item" role="presentation" onclick="changeTabEvent()">
                    <a class="nav-link" data-bs-toggle="tab" href="#addDelEvent" role="tab" aria-selected="false">
                      <div class="d-flex align-items-center">
                        <img src="@routes.Assets.versioned("images/org/event.png")">&nbsp
                        <span style="margin-left: 5px">@Messages("manage.group.event")</span>
                      </div>
                    </a>
                  </li>
                  <li class="nav-item" role="presentation" onclick="changeTabRole()">
                    <a class="nav-link" data-bs-toggle="tab" href="#addDelRole" role="tab" aria-selected="false">
                      <div class="d-flex align-items-center">
                        <img src="@routes.Assets.versioned("images/org/role.png")">&nbsp
                        <span style="margin-left: 3px">@Messages("manage.group.role")</span>
                      </div>
                    </a>
                  </li>

                </ul>
                <div class="tab-content py-3">
                  <div class="tab-pane fade show active" id="infoOrg" role="tabpanel">
                  @views.html.group.GroupList_tab_InfoOrg()
                  </div>
                  <div class="tab-pane fade" id="addDelGroup" role="tabpanel">
                  @views.html.group.GroupList_tab_AddDelGroup()
                  </div>
                  <div class="tab-pane fade" id="addDelUser" role="tabpanel">
                  @views.html.group.GroupList_tab_AddDelUser()
                  </div>
                  <div class="tab-pane fade" id="addDelDevice" role="tabpanel">
                  @views.html.group.GroupList_tab_AddMoveDevice()
                  </div>
                  <div class="tab-pane fade" id="addDelEvent" role="tabpanel">
                  @views.html.group.GroupList_tab_AddDelEvent()
                  </div>
                  <div class="tab-pane fade" id="addDelRole" role="tabpanel">
                  @views.html.group.GroupList_tab_AddDelRole()
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    @views.html.group.GroupList_modal_org_delOrg()
    @views.html.group.GroupList_modal_org_addOrgRoot()
    @views.html.group.GroupList_modal_org_edit()
    @views.html.group.GroupList_modal_org_addAttribute()
    @views.html.group.GroupList_modal_org_delAttribute()
    @views.html.group.GroupList_modal_org_editAttribute()

    @views.html.group.GroupList_modal_user_addUser()
    @views.html.group.GroupList_modal_user_delUsers()
    @views.html.group.GroupList_modal_user_editRole()

    @views.html.group.GroupList_modal_device_addDevice()
    @views.html.group.GroupList_modal_device_delDevice()
    @views.html.group.GroupList_modal_device_editDevice()
    @views.html.group.GroupList_modal_group_select()

    @views.html.group.GroupList_modal_group_add()
    @views.html.group.GroupList_modal_group_editGroup()
    @views.html.group.GroupList_modal_group_del()
    @views.html.group.GroupList_modal_group_editRole()
    @views.html.group.GroupList_modal_group_addUser()

    @views.html.group.GroupList_modal_event_del()
    @views.html.group.GroupList_modal_event_add()
    @views.html.group.GroupList_modal_event_detail()

    @views.html.group.GroupList_modal_role_add()
    @views.html.group.GroupList_modal_role_del()

    @views.html.Loading()
  </body>

  @views.html.iot.tags.Main_js()

  <script>
    var projectId = '@projectId';

          $(document).ready(function () {
            $("#menu-org").addClass("mm-active");

            $("#menu").metisMenu();
            for (var e = window.location, o = $(".metismenu li a").filter(function() {
              return this.href == e
            }).addClass("").parent().addClass("mm-active"); o.is("li");) o = o.parent("").addClass("mm-show").parent("").addClass("mm-active");
          });

    var imgOrgDefault = "@routes.Assets.versioned("images/org/building.png")";
    var iconEdit = "@routes.Assets.versioned("images/icon/edit.png")";
    var iconDelete = "@routes.Assets.versioned("images/icon/delete.png")";
    var iconCopy = "@routes.Assets.versioned("images/icon/copy.png")";
    var iconGroup = "@routes.Assets.versioned("images/icon/group.png")";
  </script>

@*  <script src="@routes.Assets.versioned("javascripts/js/plugins/bootstrap-selectpicker.js")" type="text/javascript"></script>*@
  <script src="@routes.Assets.versioned("javascripts/views/group/jstree.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/TreeOrg.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/OrgInfo.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/TreeGroup.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/UserGroup.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/DeviceGroup.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/DeviceGroup_table.js")" type="text/javascript"></script>

  <script src="@routes.Assets.versioned("javascripts/views/group/GroupList.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/RoleList.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/EventList.js")" type="text/javascript"></script>
  <script src="@routes.Assets.versioned("javascripts/views/group/EventEdit.js")" type="text/javascript"></script>

  <script src="@routes.Assets.versioned("javascripts/views/group/TreeGroup_move.js")" type="text/javascript"></script>

  <script>
          $(document).ready(function() {
            getListOrganizations();
          })
  </script>
</html>
